<!DOCTYPE html>
<html>
<head>
    <title>Moje Zabezpieczone Linki</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 0 auto; padding: 20px; }
        #links { margin-top: 20px; }
        #error { color: red; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>Moje Linki</h1>
    <input type="password" id="password" placeholder="Wpisz hasło">
    <button onclick="loadLinks()">Odblokuj</button>
    <div id="error"></div>
    <div id="links"></div>

    <script>
        async function loadLinks() {
            const password = document.getElementById('password').value;
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = '';
            
            try {
                // Pobierz zaszyfrowany plik (używając RAW URL z GitHub)
                const repoUrl = 'https://raw.githubusercontent.com/jakub-arkadiusz-putowski/database/main/links.json.enc';
                const response = await fetch(repoUrl + '?ver=' + Date.now());
                if (!response.ok) throw new Error("Nie można znaleźć pliku!");
                
                const encryptedData = await response.text();
                
                // Odszyfruj (AES)
                const decrypted = CryptoJS.AES.decrypt(encryptedData, password);
                const text = decrypted.toString(CryptoJS.enc.Utf8);
                
                if (!text) throw new Error("Błędne hasło!");
                
                // Pokaż linki
                const links = JSON.parse(text);
                let html = "<h2>Twoje linki:</h2><ul>";
                for (const [name, url] of Object.entries(links)) {
                    html += `<li><a href="${url}" target="_blank">${name}</a></li>`;
                }
                document.getElementById('links').innerHTML = html;
                
            } catch (e) {
                errorDiv.textContent = "Błąd: " + e.message;
            }
        }
    </script>
</body>
</html>
